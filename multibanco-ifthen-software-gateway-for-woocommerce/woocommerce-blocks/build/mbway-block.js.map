{"version":3,"file":"mbway-block.js","mappings":"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","sources":["webpack://test/external window \"React\"","webpack://test/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://test/external window [\"wc\",\"wcSettings\"]","webpack://test/external window [\"wp\",\"hooks\"]","webpack://test/external window [\"wp\",\"htmlEntities\"]","webpack://test/external window [\"wp\",\"i18n\"]","webpack://test/webpack/bootstrap","webpack://test/webpack/runtime/compat get default export","webpack://test/webpack/runtime/define property getters","webpack://test/webpack/runtime/hasOwnProperty shorthand","webpack://test/webpack/runtime/make namespace object","webpack://test/./woocommerce-blocks/mbway/src/index.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport { registerPaymentMethod } from '@woocommerce/blocks-registry';\nimport { __ } from '@wordpress/i18n';\nimport { getSetting } from '@woocommerce/settings';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useEffect, useState } from 'react';\nimport { applyFilters } from '@wordpress/hooks';\n\nconst settings = getSetting( 'mbway_ifthen_for_woocommerce_data', {} );\nconst defaultLabel = __(\n\t'MB WAY mobile payment',\n\t'multibanco-ifthen-software-gateway-for-woocommerce'\n) + ' (ifthenpay)';\nconst label = decodeEntities( settings.title ) || defaultLabel;\n\n/**\n * Content component\n *\n * @param {*} props Props from payment API.\n */\nconst Content = ( props ) => {\n\t/* Data to send to the server - https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/internal-developers/block-client-apis/checkout/checkout-api.md#passing-a-value-from-the-client-through-to-server-side-payment-processing */\n\tconst [ mbwayPhoneNumber, setMbwayPhoneNumber ] = useState( settings.default_number ); // This works but mbwayPhoneNumber is not available inside onPaymentSetup below\n\tconst [ mbwayCountryCode, setMbwayCountryCode ] = useState( settings.default_country_code );\n\tconst { eventRegistration, emitResponse }       = props;\n\tconst { onPaymentSetup }                        = eventRegistration; // onPaymentProcessing deprecated - use onPaymentSetup instead\n\tuseEffect( () => {\n\t\tconst unsubscribe = onPaymentSetup( async () => {\n\n\t\t\t// Here we can do any processing we need, and then emit a response.\n\t\t\t// For example, we might validate a custom field, or perform an AJAX request, and then emit a response indicating it is valid or not.\n\t\t\tconst mbway_ifthen_for_woocommerce_phone        = mbwayPhoneNumber; // This will need to be the value of the input field\n\t\t\tconst mbway_ifthen_for_woocommerce_country_code = mbwayCountryCode; // This will need to be the value of the select field\n\t\t\tconst customDataIsValid = (\n\t\t\t\t// If international is allowed and it's not PT, allow any number length\n\t\t\t\tsettings.allow_international && mbway_ifthen_for_woocommerce_country_code !== 'PT'\n\t\t\t)\n\t\t\t||\n\t\t\t(\n\t\t\t\t// If international is not allowed or it's PT, number length must be 9 and start with 9\n\t\t\t\tmbway_ifthen_for_woocommerce_phone.length === 9\n\t\t\t\t&&\n\t\t\t\tmbway_ifthen_for_woocommerce_phone.charAt( 0 ) === '9'\n\t\t\t);\n\n\t\t\tif ( customDataIsValid ) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: emitResponse.responseTypes.SUCCESS,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\tpaymentMethodData: applyFilters( 'mbway_ifthen_blocks_checkout_payment_data', {\n\t\t\t\t\t\t\tmbway_ifthen_for_woocommerce_phone,\n\t\t\t\t\t\t\tmbway_ifthen_for_woocommerce_country_code,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: emitResponse.responseTypes.ERROR,\n\t\t\t\tmessage: __(\n\t\t\t\t\t'Invalid MB WAY phone number',\n\t\t\t\t\t'multibanco-ifthen-software-gateway-for-woocommerce'\n\t\t\t\t),\n\t\t\t};\n\t\t} );\n\t\t// Unsubscribes when this component is unmounted.\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t}, [\n\t\temitResponse.responseTypes.ERROR,\n\t\temitResponse.responseTypes.SUCCESS,\n\t\tonPaymentSetup,\n\t\tmbwayPhoneNumber,\n\t\tmbwayCountryCode\n\t] );\n\n\t/* Select value */\n\tconst HandleMBWayCountryChange = ( event ) => {\n\t\tconst value = event.target.value;\n\t\tsetMbwayCountryCode( value );\n\t\t// If PT is selected, validate for Portuguese mobile number format\n\t\tconst phoneInput = document.getElementById( settings.id + '_phone' );\n\t\tif ( phoneInput ) {\n\t\t\tif ( value === 'PT' ) {\n\t\t\t\tphoneInput.maxLength = 9;\n\t\t\t} else {\n\t\t\t\tphoneInput.maxLength = 99;\n\t\t\t}\n\t\t}\n\t};\n\n\t/* Input value */\n\tconst HandleMBWayChange = ( event ) => {\n\t\tconst value = event.target.value.replace( /\\D/g, \"\" ); // Remove non-numeric characters\n\t\tsetMbwayPhoneNumber( value );\n\t};\n\n\t/* Content */\n\t// Description\n\tvar description = React.createElement( 'p', null, decodeEntities( settings.description || '' ) );\n\t// If international allowed, show prefix selector\n\tif ( settings.allow_international ) {\n\t\t// Convert object to array if needed\n\t\tconst countryOptions = settings.country_code_options && typeof settings.country_code_options === 'object' \n\t\t\t? Object.entries( settings.country_code_options ).map( ( [ countryCode, countryData ] ) => {\n\t\t\t\treturn {\n\t\t\t\t\tcode:    countryCode,\n\t\t\t\t\tdisplay: countryData.display\n\t\t\t\t};\n\t\t\t})\n\t\t\t: [{ code: 'PT', value: '+351', display: 'Portugal (+351)' }];\n\t\tvar countrycodeselect = React.createElement(\n\t\t\t'select',\n\t\t\t{\n\t\t\t\tname:      settings.id + '_country_code',\n\t\t\t\tid:        settings.id + '_country_code',\n\t\t\t\tclassName: 'wc-blocks-components-select__select',\n\t\t\t\toptions:   countryOptions,\n\t\t\t\trequired:  true,\n\t\t\t\tvalue:     mbwayCountryCode,\n\t\t\t\tonChange:  HandleMBWayCountryChange\n\t\t\t},\n\t\t\t// Map the transformed array to option elements\n\t\t\tcountryOptions.map( country => \n\t\t\t\tReact.createElement(\n\t\t\t\t\t'option',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: country.code,\n\t\t\t\t\t\tvalue: country.code\n\t\t\t\t\t},\n\t\t\t\t\tcountry.display\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t\tif ( settings.default_country_code === 'PT' ) {\n\t\t\tvar maxInputLength = '9';\n\t\t} else {\n\t\t\tvar maxInputLength = '99';\n\t\t}\n\t} else {\n\t\tvar countrycodeselect = null;\n\t\tvar maxInputLength    = '9';\n\t}\n\n\t// Input field\n\tvar phonenumberinput = React.createElement( 'input', {\n\t\ttype:         'tel',\n\t\tname:         settings.id + '_phone',\n\t\tid:           settings.id + '_phone',\n\t\tplaceholder:  '9xxxxxxxx',\n\t\tautoComplete: 'off',\n\t\tmaxLength:    maxInputLength,\n\t\trequired:     true,\n\t\tvalue:        mbwayPhoneNumber,\n\t\tonChange:     HandleMBWayChange\n\t} );\n\n\t// Label inside field\n\tvar phonenumberlabel = React.createElement( 'label', {\n\t\thtmlFor: settings.id + '_phone'\n\t}, decodeEntities( settings.phonenumbertext || '' ) );\n\n\t// Extend before phone number\n\tvar beforePhoneNumber = applyFilters( 'mbway_ifthen_blocks_checkout_before_phone_number', null );\n\n\t// Country code selector\n\tif ( settings.allow_international ) {\n\t\t// Label inside field\n\t\tvar countrycodelabel = React.createElement( 'label', {\n\t\t\thtmlFor:   settings.id + '_country_code',\n\t\t\tclassName: 'wc-blocks-components-select__label'\n\t\t}, __(\n\t\t\t'Country code',\n\t\t\t'multibanco-ifthen-software-gateway-for-woocommerce'\n\t\t) );\n\t\t// Select field\n\t\tvar countrycode = React.createElement( 'div', {\n\t\t\tclassName: 'wc-blocks-components-select__container'\n\t\t}, '', countrycodelabel, countrycodeselect );\n\t\tvar countrycode = React.createElement( 'div', {\n\t\t\tclassName: 'wc-blocks-components-select'\n\t\t}, '', countrycode );\n\t} else {\n\t\tvar countrycode = null;\n\t}\n\n\t// Phone number: input + label\n\tvar phonenumber = React.createElement( 'div', {\n\t\tclassName: 'wc-block-components-text-input is-active'\n\t}, '', phonenumberinput, phonenumberlabel );\n\n\t// Extend after phone number\n\tvar afterPhoneNumber = applyFilters( 'mbway_ifthen_blocks_checkout_after_phone_number', null );\n\n\t// Return Content\n\treturn React.createElement( 'div', null, description, beforePhoneNumber, countrycode, phonenumber, afterPhoneNumber );\n};\n\n/**\n * Label component\n *\n * @param {*} props Props from payment API.\n */\nconst Label = ( props ) => {\n\tvar icon = React.createElement( 'img', { src: settings.icon, width: settings.icon_width, height: settings.icon_height, style: { display: 'inline' } } );\n\tvar span = React.createElement( 'span', { className: 'wc-block-components-payment-method-label wc-block-components-payment-method-label--with-icon' }, icon, decodeEntities( settings.title ) || defaultLabel );\n\treturn span;\n};\n\n\n/**\n * CanMakePayment function\n *\n * @param checkoutData Checkout details.\n */\nconst CanMakePayment = ( checkoutData ) => {\n\t// Euro?\n\tif ( checkoutData.cartTotals.currency_code != 'EUR' ) {\n\t\treturn false;\n\t}\n\t// Portugal?\n\tif ( settings.only_portugal ) {\n\t\tif ( checkoutData.billingData.country != 'PT' && checkoutData.shippingAddress.country != 'PT' ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t// Minimum and maximum value\n\tvar cart_total = checkoutData.cartTotals.total_price / 100; //It's return in cents (?)\n\tif ( settings.only_above ) {\n\t\tif ( cart_total < settings.only_above ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif ( settings.only_bellow ) {\n\t\tif ( cart_total > settings.only_bellow ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * MBWAY payment method config object.\n */\nconst ifthenpayMbWayPaymentMethod = {\n\tname:           'mbway_ifthen_for_woocommerce',\n\tlabel:          React.createElement( Label, null ),\n\tcontent:        React.createElement( Content, null ),\n\tedit:           React.createElement( Content, null ),\n\ticons:          null,\n\tcanMakePayment: CanMakePayment,\n\tariaLabel:      label,\n\tsupports:       {\n\t\tfeatures: settings.supports,\n\t},\n};\n\nregisterPaymentMethod( ifthenpayMbWayPaymentMethod );\n"],"names":["registerPaymentMethod","__","getSetting","decodeEntities","useEffect","useState","applyFilters","settings","defaultLabel","label","title","Content","props","mbwayPhoneNumber","setMbwayPhoneNumber","default_number","mbwayCountryCode","setMbwayCountryCode","default_country_code","eventRegistration","emitResponse","onPaymentSetup","unsubscribe","mbway_ifthen_for_woocommerce_phone","mbway_ifthen_for_woocommerce_country_code","customDataIsValid","allow_international","length","charAt","type","responseTypes","SUCCESS","meta","paymentMethodData","ERROR","message","HandleMBWayCountryChange","event","value","target","phoneInput","document","getElementById","id","maxLength","HandleMBWayChange","replace","description","React","createElement","countryOptions","country_code_options","Object","entries","map","countryCode","countryData","code","display","countrycodeselect","name","className","options","required","onChange","country","key","maxInputLength","phonenumberinput","placeholder","autoComplete","phonenumberlabel","htmlFor","phonenumbertext","beforePhoneNumber","countrycodelabel","countrycode","phonenumber","afterPhoneNumber","Label","icon","src","width","icon_width","height","icon_height","style","span","CanMakePayment","checkoutData","cartTotals","currency_code","only_portugal","billingData","shippingAddress","cart_total","total_price","only_above","only_bellow","ifthenpayMbWayPaymentMethod","content","edit","icons","canMakePayment","ariaLabel","supports","features"],"sourceRoot":""}